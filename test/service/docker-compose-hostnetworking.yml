# Uses host mode networking, and assumes ES is running on the host at 127.0.0.1
# Only used for Travis CI, which configures ES that way by default.
version: '2'

services:
  dcc-dashboard-service:
    container_name: "dcc-dashboard-service"
    environment:
      AZUL_ES_ENDPOINT: "127.0.0.1:9200"
      AZUL_FILE_INDEX: "test_data"
      AZUL_RESOURCE_PREFIX: "${AZUL_RESOURCE_PREFIX}"
      AZUL_DEPLOYMENT_STAGE: "${AZUL_DEPLOYMENT_STAGE}"
    build:
      context: ../..
      dockerfile: webservice/test/Dockerfile
    restart: always
    network_mode: host
